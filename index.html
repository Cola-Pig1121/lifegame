<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>随机修仙人生</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-wrapper">
        <div id="game-container">
            <div id="game-screen">
                <div id="event-log"></div>
                <div id="choices-container"></div>
            </div>
            <div id="status-bar">
                <div id="player-status"></div>
                <div id="world-status"></div>
            </div>
            <div id="menu-bar">
                <button id="new-story-btn">新故事</button>
                <button id="save-btn">保存</button>
                <button id="load-btn">读取</button>
                <button id="history-btn">历史记录</button>
                <button id="reference-btn">体系参照</button>
                <button id="settings-btn">设置</button>
                <button id="export-btn">导出进度</button>
                <button id="import-btn">导入进度</button>
                <input type="file" id="import-file" style="display: none;">
            </div>
        </div>


        <!-- 确认弹窗 -->
        <div id="confirm-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h3>保存当前进度</h3>
                <p>检测到当前游戏进度，是否保存到历史记录？</p>
                <div class="modal-buttons">
                    <button id="save-and-start-btn">保存并开始</button>
                    <button id="direct-start-btn">直接开始</button>
                    <button id="cancel-start-btn">取消</button>
                </div>
            </div>
        </div>

        <!-- 设置弹窗 -->
        <div id="settings-modal" class="modal" style="display: none;">
            <div class="modal-content settings-modal-content">
                <h3>API设置</h3>
                <div class="settings-form">
                    <div class="setting-item">
                        <label for="base-url-input">Base URL:</label>
                        <input type="text" id="base-url-input" placeholder="请输入API的Base URL">
                        <div class="preset-buttons">
                            <button class="preset-btn" data-url="https://router.huggingface.co/v1/chat/completions">HuggingFace</button>
                            <button class="preset-btn" data-url="https://router.hf-mirror.com/v1/chat/completions">HF镜像</button>
                            <button class="preset-btn" data-url="https://api.openai.com/v1/chat/completions">OpenAI</button>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label for="api-key-input">API Key:</label>
                        <input type="password" id="api-key-input" placeholder="请输入你的API Key">
                        <button id="toggle-key-visibility" type="button">👁️</button>
                    </div>
                    <div class="current-settings">
                        <h4>当前设置:</h4>
                        <p>Base URL: <span id="current-base-url">未设置</span></p>
                        <p>API Key: <span id="current-api-key">未设置</span></p>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button id="save-settings-btn">保存设置</button>
                    <button id="test-connection-btn">测试连接</button>
                    <button id="cancel-settings-btn">取消</button>
                </div>
            </div>
        </div>
    </div>
    <footer>Cola Pig</footer>

    <script src="systems.js"></script>
    <script src="game.js"></script>
</body>
</html>